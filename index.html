<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="icon" href="calculator.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script src="js/jquery-3.1.1.min.js"></script>
<title>Calculator</title>
</head>

<body>
<div class="wrapper">
<div class="header">
Programming Calculator
</div>
<div id="area"></div>
<div id="input"></div>
<div class="convert">
<p style="margin-top:10px;" id="hex" onclick="hex(this)">HEX <span></span></p>
<p id="dec" onclick="dec(this)" style="background-color:grey;">DEC <span></span></p>
<p id="oct" onclick="oct(this)">OCT <span></span></p>
<p id="bin" onclick="bin(this)">BIN <span></span></p>
</div>
<div class="row">
<button class="press" disabled>&nbsp;</button>
<button class="press" value="%">Mod</button>
<button style="color:lightblue" class="press" value="CE">CE</button>
<button style="color:lightblue" class="press" value="clear">C</button>
<button class="press" value="back">←</button>
<button class="press" value="/">÷</button>
</div>
<div class="row">
<button class="press" value="a" disabled>A</button>
<button class="press" value="b" disabled>B</button>
<button class="press" value="7">7</button>
<button class="press" value="8">8</button>
<button class="press" value="9">9</button>
<button class="press" value="*">x</button>
</div>
<div class="row">
<button class="press" value="c" disabled>C</button>
<button class="press" value="d" disabled>D</button>
<button class="press" value="4">4</button>
<button class="press" value="5">5</button>
<button class="press" value="6">6</button>
<button class="press" value="-">-</button>
</div>
<div class="row">
<button class="press" value="e" disabled>E</button>
<button class="press" value="f" disabled>F</button>
<button class="press" value="1">1</button>
<button class="press" value="2">2</button>
<button class="press" value="3">3</button>
<button class="press" value="+">+</button>
</div>
<div class="row">
<button class="press" disabled>&nbsp;</button>
<button class="press" disabled>&nbsp;</button>
<button class="press" value="np">±</button>
<button class="press" value="0">0</button>
<button class="press" disabled>&nbsp;</button>
<button class="press" value="=">=</button>
</div>
</div>
<script>
var numType=10;
var decStorage="";

$(document).ready(function(){
	$('#input').bind('DOMNodeInserted DOMSubtreeModified DOMNodeRemoved', function(event) {
    var hexValue=document.getElementById('hex').querySelector('span');
	toHex=parseInt(document.querySelector('#input').innerHTML,numType);
	if(toHex<0) hexValue.innerHTML=(toHex>>>0).toString(16).slice(4,8);
	else hexValue.innerHTML=toHex.toString(16);
	var decValue=document.getElementById('dec').querySelector('span');
	decValue.innerHTML=parseInt(document.querySelector('#input').innerHTML,numType).toString();
	var octValue=document.getElementById('oct').querySelector('span');
	toOct=parseInt(document.querySelector('#input').innerHTML,numType);
	if(toOct<0) octValue.innerHTML='1'+(toOct>>>0).toString(8).slice(6,11);
	else octValue.innerHTML=toOct.toString(8);
	var binValue=document.getElementById('bin').querySelector('span');
	toBin=parseInt(document.querySelector('#input').innerHTML,numType);
	if(toBin<0) binValue.innerHTML=(toBin>>>0).toString(2).slice(16,33);
	else binValue.innerHTML=toBin.toString(2);
	});
});


function hex(x) {
	numType=16;
	var y = document.querySelector(".convert").querySelectorAll("p");
	for(var i=0;i<y.length;i++){
		y[i].style.backgroundColor="";
	}
	x.style.background = "grey";
	var m=document.querySelectorAll("button[value='a'],button[value='b'],button[value='c'],button[value='d'],button[value='e'],button[value='f']");
	for(var i=0;i<m.length;i++){
	 m[i].disabled=false;
	}
}
function dec(x) {
	numType=10;
	var y = document.querySelector(".convert").querySelectorAll("p");
	for(var i=0;i<y.length;i++){
		y[i].style.backgroundColor="";
	}
	x.style.background = "grey";
	var m=document.querySelectorAll("button[value='a'],button[value='b'],button[value='c'],button[value='d'],button[value='e'],button[value='f']");
	for(var i=0;i<m.length;i++){
	 m[i].disabled=true;
	}
}
function oct(x) {
	numType=8;
	var y = document.querySelector(".convert").querySelectorAll("p");
	for(var i=0;i<y.length;i++){
		y[i].style.backgroundColor="";
	}
	x.style.background = "grey";
	var m=document.querySelectorAll("button[value='a'],button[value='b'],button[value='c'],button[value='d'],button[value='e'],button[value='f'],button[value='8'],button[value='9']");
	for(var i=0;i<m.length;i++){
	 m[i].disabled=true;
	}	
}
function bin(x) {
	numType=2;
	var y = document.querySelector(".convert").querySelectorAll("p");
	for(var i=0;i<y.length;i++){
		y[i].style.backgroundColor="";
	}
	x.style.background = "grey";
	var m=document.querySelectorAll("button[value='a'],button[value='b'],button[value='c'],button[value='d'],button[value='e'],button[value='f'],button[value='3'],button[value='4'],button[value='5'],button[value='6'],button[value='7'],button[value='8'],button[value='9']");
	for(var i=0;i<m.length;i++){
	 m[i].disabled=true;
	}	
}

var keys = document.querySelectorAll('.press');
for(var i=0;i<keys.length;i++){
	keys[i].onclick=function(e){
		var value=this.value;
		var display=document.querySelector('#area');
		var displayValue=display.innerHTML;
		var input=document.querySelector('#input');
		var inputValue=input.innerHTML;
		var hexValue=document.getElementById('hex').querySelector('span').innerHTML;
		var binValue=document.getElementById('bin').querySelector('span').innerHTML;
		if(hexValue.length<=3 && binValue.length<=15 && inputValue.length<=13 && value!="=" && value!="CE" && value!="back" && value!="clear" && value!="%" && value!="np" && value!="+" && value!="-" && value!="*" && value!="/"){
			input.innerHTML+=value;
		}
		if(value=="+" || value=="-" || value=="*" || value=="/" || value=="%"){
			mix=inputValue+value;
			display.innerHTML+=mix;
			input.innerHTML="";
		}
		if(value=="="){
			display.innerHTML+=inputValue;
			input.innerHTML="";
			input.innerHTML=parseInt(eval(display.innerHTML));
			display.innerHTML="";
		}
		if(value=="back")
			input.innerHTML=inputValue.replace(/.$/,"");
		if(value=="clear"){
			input.innerHTML="";
			display.innerHTML="";
		}
		if(value=="CE")
			input.innerHTML="";
		if(value=="np"){
			if(inputValue.charAt(0)=='-') input.innerHTML=inputValue.substr(1);
			else input.innerHTML='-'+inputValue;
		}
	}
}

</script>
</body>
</html> 